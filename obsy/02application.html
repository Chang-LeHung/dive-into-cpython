<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>深入理解 python 虚拟机：描述器的王炸应用-property、staticmethod 和 classmehtod | Dive into CPython virtual machine</title><meta name="description" content="深入理解 CPython 虚拟机">
    <link rel="preload" href="/dive-into-cpython/assets/style-012314e2.css" as="style"><link rel="stylesheet" href="/dive-into-cpython/assets/style-012314e2.css">
    <link rel="modulepreload" href="/dive-into-cpython/assets/app-6b5e6c63.js"><link rel="modulepreload" href="/dive-into-cpython/assets/02application.html-0f2fe4c7.js"><link rel="modulepreload" href="/dive-into-cpython/assets/qrcode2-187b7271.js"><link rel="modulepreload" href="/dive-into-cpython/assets/02application.html-87047342.js"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-0b09ad74.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01list.html-69a9c9c1.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01list_upload.html-fe94b1cc.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02tuple.html-b7477daf.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02tuple_upload.html-5a865686.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03float.html-2f5a3561.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03float_upload.html-1dfe3d5d.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04long.html-a472bab8.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04long_upload.html-2264a99f.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05complex.html-e8f47248.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05complex_upload.html-c0f29764.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06set.html-33c3f396.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06set_upload.html-ab1e10ed.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07dict.html-4a49b293.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07dict_upload.html-a31dc608.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08bytes.html-b50b2e22.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08bytes_upload.html-2fe4996a.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09dict.html-95af47a7.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09dict_upload.html-48c877d6.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-8159f4b8.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01class.html-5fc389a9.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03decriptor.html-1fbadb63.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04mro.html-555bcac0.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04mro_upload.html-9e93522d.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05magicmethod.html-8aba6cdc.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06magicmethod02.html-c6b3603d.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07super.html-1579859c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-c629a667.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01pyc.html-c13318e8.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01pyc_upload.html-8fafa6d0.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02codeobject.html-279fd19c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02codeobject_upload.html-09f56ad5.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03bytecode.html-7a57a5f9.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03bytecode_upload.html-8351be8f.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04bytecode_tutorial.html-489935a7.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04bytecode_tutorial_upload.html-f57006d2.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05bytecode_tutorial.html-6a78cdc4.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05bytecode_tutorial_upload.html-2143825e.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06bytecode_tutorial.html-06f0eb45.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06bytecode_tutorial_upload.html-ef8e0bd6.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07frameobject.html-6d2788d2.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07frameobject_upload.html-fe06afcd.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08debugger.html-c03ffec7.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09binpyc.html-f16e7564.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09binpyc_upload.html-a53fadcf.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-c9043dd6.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-5fc350ca.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01list.html-48896f8b.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01list_upload.html-a6a982ac.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02tuple.html-3d8e29b0.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02tuple_upload.html-d7b68992.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03float.html-6d2a8832.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03float_upload.html-5078bd10.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04long.html-6c0f9b41.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04long_upload.html-f02f03d0.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05complex.html-426b2634.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05complex_upload.html-47fc4032.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06set.html-16bb4fff.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06set_upload.html-83bd0f29.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07dict.html-82c0406d.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07dict_upload.html-18e84d30.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08bytes.html-c3122be8.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08bytes_upload.html-2965b254.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09dict.html-0af896d9.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09dict_upload.html-39af21cd.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-b6a2b5c0.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01class.html-b3495c25.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03decriptor.html-e2b2247d.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04mro.html-0209b44a.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04mro_upload.html-a78f4e85.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05magicmethod.html-6f4baea8.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06magicmethod02.html-1531fb4c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07super.html-70a9aeeb.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-a299884c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01pyc.html-48d80eea.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/01pyc_upload.html-2bdd2fac.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02codeobject.html-9dc05f47.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/02codeobject_upload.html-01d5e128.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03bytecode.html-bbda48cf.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/03bytecode_upload.html-c6224de2.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04bytecode_tutorial.html-9e19855c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/04bytecode_tutorial_upload.html-6395bf4f.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05bytecode_tutorial.html-f45ac99c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/05bytecode_tutorial_upload.html-e8da1f64.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06bytecode_tutorial.html-b63ebf5c.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/06bytecode_tutorial_upload.html-e35769ed.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07frameobject.html-76657c87.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/07frameobject_upload.html-b3d6d0cb.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/08debugger.html-a6077842.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09binpyc.html-bf0be7bd.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/09binpyc_upload.html-f0e867f3.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/index.html-27b63451.js" as="script"><link rel="prefetch" href="/dive-into-cpython/assets/404.html-c9a64978.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/dive-into-cpython/" class=""><img class="logo" src="/dive-into-cpython/profile.jpeg" alt="Dive into CPython virtual machine"><span class="site-name can-hide">Dive into CPython virtual machine</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/dive-into-cpython/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/objects/" class="" aria-label="数据结构对象"><!--[--><!--]--> 数据结构对象 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/obsy/" class="router-link-active" aria-label="对象系统"><!--[--><!--]--> 对象系统 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/pvm/" class="" aria-label="PVM"><!--[--><!--]--> PVM <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Chang-LeHung/dive-into-cpython" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/dive-into-cpython/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/objects/" class="" aria-label="数据结构对象"><!--[--><!--]--> 数据结构对象 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/obsy/" class="router-link-active" aria-label="对象系统"><!--[--><!--]--> 对象系统 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/dive-into-cpython/pvm/" class="" aria-label="PVM"><!--[--><!--]--> PVM <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Chang-LeHung/dive-into-cpython" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/dive-into-cpython/obsy/01class.html" class="sidebar-item sidebar-heading" aria-label="深入理解python虚拟机：黑科技的幕后英雄——描述器"><!--[--><!--]--> 深入理解python虚拟机：黑科技的幕后英雄——描述器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="深入理解 python 虚拟机：描述器的王炸应用-property、staticmethod 和 classmehtod"><!--[--><!--]--> 深入理解 python 虚拟机：描述器的王炸应用-property、staticmethod 和 classmehtod <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#property" class="router-link-active router-link-exact-active sidebar-item" aria-label="property"><!--[--><!--]--> property <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#什么是-property" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是 property？"><!--[--><!--]--> 什么是 property？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#如何使用-property" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何使用 property？"><!--[--><!--]--> 如何使用 property？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#property-的本质" class="router-link-active router-link-exact-active sidebar-item" aria-label="property 的本质"><!--[--><!--]--> property 的本质 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#在-python-语言层面实现-property-机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="在 python 语言层面实现 property 机制"><!--[--><!--]--> 在 python 语言层面实现 property 机制 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#classmethod-和-staticmethod" class="router-link-active router-link-exact-active sidebar-item" aria-label="classmethod 和 staticmethod"><!--[--><!--]--> classmethod 和 staticmethod <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#staticmethod" class="router-link-active router-link-exact-active sidebar-item" aria-label="staticmethod"><!--[--><!--]--> staticmethod <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#classmethod" class="router-link-active router-link-exact-active sidebar-item" aria-label="classmethod"><!--[--><!--]--> classmethod <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/dive-into-cpython/obsy/02application.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/dive-into-cpython/obsy/03decriptor.html" class="sidebar-item sidebar-heading" aria-label="深入理解 python 虚拟机：描述器实现原理与源码分析"><!--[--><!--]--> 深入理解 python 虚拟机：描述器实现原理与源码分析 <!--[--><!--]--></a><!----></li><li><a href="/dive-into-cpython/obsy/04mro.html" class="sidebar-item sidebar-heading" aria-label="深入理解 python 虚拟机：多继承与 mro"><!--[--><!--]--> 深入理解 python 虚拟机：多继承与 mro <!--[--><!--]--></a><!----></li><li><a href="/dive-into-cpython/obsy/05magicmethod.html" class="sidebar-item sidebar-heading" aria-label="魔术方法之数学计算"><!--[--><!--]--> 魔术方法之数学计算 <!--[--><!--]--></a><!----></li><li><a href="/dive-into-cpython/obsy/06magicmethod02.html" class="sidebar-item sidebar-heading" aria-label="深入理解 python 虚拟机：花里胡哨的魔术方法"><!--[--><!--]--> 深入理解 python 虚拟机：花里胡哨的魔术方法 <!--[--><!--]--></a><!----></li><li><a href="/dive-into-cpython/obsy/07super.html" class="sidebar-item sidebar-heading" aria-label="深入理解Python虚拟机：super的超级魔法"><!--[--><!--]--> 深入理解Python虚拟机：super的超级魔法 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="深入理解-python-虚拟机-描述器的王炸应用-property、staticmethod-和-classmehtod" tabindex="-1"><a class="header-anchor" href="#深入理解-python-虚拟机-描述器的王炸应用-property、staticmethod-和-classmehtod" aria-hidden="true">#</a> 深入理解 python 虚拟机：描述器的王炸应用-property、staticmethod 和 classmehtod</h1><p>在本篇文章当中主要给大家介绍描述器在 python 语言当中有哪些应用，主要介绍如何使用 python 语言实现 python 内置的 proterty 、staticmethod 和 class method 。</p><h2 id="property" tabindex="-1"><a class="header-anchor" href="#property" aria-hidden="true">#</a> property</h2><p>当你在编写Python代码时，你可能会遇到一些需要通过方法来访问或设置的属性。Python中的 property 装饰器提供了一种优雅的方式来处理这种情况，允许你将这些方法封装为属性，从而使代码更加简洁和易于阅读。在本文中，我将向你介绍 property 装饰器的工作原理以及如何在你的代码中使用它。</p><h3 id="什么是-property" tabindex="-1"><a class="header-anchor" href="#什么是-property" aria-hidden="true">#</a> 什么是 property？</h3><p>Python 中的 property 是一种装饰器，它允许你定义一个方法，使其看起来像一个属性。换句话说，property 允许你以属性的方式访问或设置类的数据成员，而不必直接调用一个方法。</p><p>在 Python 中，属性通常是一个对象的数据成员，它们可以通过直接访问对象来获取或设置。然而，有时候你可能需要在获取或设置属性时执行某些额外的操作，例如进行类型检查、范围检查或计算属性等。在这种情况下，使用 property 装饰器可以让你以属性的方式访问或设置这些属性，并在访问或设置时执行额外的操作。</p><h3 id="如何使用-property" tabindex="-1"><a class="header-anchor" href="#如何使用-property" aria-hidden="true">#</a> 如何使用 property？</h3><p>让我们看一个简单的例子，假设你正在编写一个表示矩形的类，并且你想要在计算矩形的面积时执行一些额外的操作。你可以使用 property 装饰器来实现这个功能，如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Rectangle</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_width <span class="token operator">=</span> width
        self<span class="token punctuation">.</span>_height <span class="token operator">=</span> height
    
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">width</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_width
    
    <span class="token decorator annotation punctuation">@width<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">width</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;Width must be positive&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_width <span class="token operator">=</span> value
    
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">height</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_height
    
    <span class="token decorator annotation punctuation">@height<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">height</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;Height must be positive&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_height <span class="token operator">=</span> value
    
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_width <span class="token operator">*</span> self<span class="token punctuation">.</span>_height
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们使用 property 装饰器定义了三个属性：width、height和area。每个属性都有一个 getter 方法和一个 setter 方法，它们分别负责获取和设置属性的值。当你使用类的实例访问这些属性时，你会发现它们似乎就像是一个普通的属性，而不是一个方法。</p><p>注意，getter 方法没有参数，而 setter 方法接受一个参数。当你通过类的实例访问属性时，你只需要使用点运算符即可访问这些属性，就像这样：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>rect <span class="token operator">=</span> Rectangle<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出结果：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">10</span>
<span class="token number">20</span>
<span class="token number">200</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以像下面这样设置属性的值：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>rect<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">5</span>
rect<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出结果如下所示：</p><div class="language-basj line-numbers-mode" data-ext="basj"><pre class="language-basj"><code>5
10
50
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在设置 width 或 height 属性的值时，会执行对应的 setter 方法进行类型检查和范围检查。如果值不符合要求，将会抛出一个 ValueError 异常。这使得你的代码更加健壮和可靠。</p><p>除了在属性的 getter 和 setter 方法中执行额外的操作外，你还可以使用 property 装饰器计算属性。计算属性是指，当你访问属性时，它不是从类的实例中获取数据，而是基于类的其他数据成员进行计算。例如，如果你有一个表示温度的类，你可以定义一个计算属性，用于将摄氏度转换为华氏度，如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Temperature</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> celsius<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_celsius <span class="token operator">=</span> celsius
    
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">celsius</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_celsius
    
    <span class="token decorator annotation punctuation">@celsius<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">celsius</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_celsius <span class="token operator">=</span> value
    
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">fahrenheit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>_celsius <span class="token operator">*</span> <span class="token number">9</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们定义了一个 Temperature 类，它包含一个 celsius 属性和一个 fahrenheit 属性。celsius 属性是一个普通的属性，可以直接访问和设置。而 fahrenheit 属性是一个计算属性，它基于 celsius 属性计算而来。当你访问 fahrenheit 属性时，它将自动计算出相应的华氏度并返回。你可以会对上面的代码有点疑惑<code>celsius.setter</code> 是什么，他是那里来的，事实上在它上面的 <code>@property</code> 执行之后 celsius 已经不再是一个函数了，而是一个 property 的类产生的对象了，因此 <code>celsius.setter</code> 是 property 类中的 <code>setter</code> 属性了，事实上他是一个类的方法了，而装饰器 <code>@celsius.setter</code> 就是将 <code>def celsius(self, value)</code> 这个函数作为参数传递给方法 <code>celsius.setter</code>。</p><p>我们介绍了 Python 中的 property 装饰器，它允许你将方法封装为属性，并在访问或设置属性时执行额外的操作。通过使用 property 装饰器，你可以编写更加简洁、优雅和可读的代码，同时使代码更加健壮和可靠。</p><h3 id="property-的本质" tabindex="-1"><a class="header-anchor" href="#property-的本质" aria-hidden="true">#</a> property 的本质</h3><p>property 是 python 内置的一个类，注意它是类。在前面的内容当中我们已经详细讨论过了装饰器的原理，并且从字节码的角度进行了分析。因此我们可以很容易理解上面 <code>Temperature</code> 类。我们可以将装饰器展开：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Temperature</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> celsius<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_celsius <span class="token operator">=</span> celsius

    <span class="token keyword">def</span> <span class="token function">celsius1</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_celsius

    celsius <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>celsius1<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">celsius2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_celsius <span class="token operator">=</span> value

    celsius <span class="token operator">=</span> celsius<span class="token punctuation">.</span>setter<span class="token punctuation">(</span>celsius2<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">fahrenheit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>_celsius <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span>

    fahrenheit <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>fahrenheit<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> Temperature<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>celsius<span class="token punctuation">)</span>
    t<span class="token punctuation">.</span>celsius <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>celsius<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>fahrenheit<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的程序输出结果如下所示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">10</span>
<span class="token number">100</span>
<span class="token number">212.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到上面的程序正确的输出了结果，符合我们对与 property 的理解和使用。从上面的分析我们可以看到 property 本质就是一个 python 的类，因此我可以完全自己实现一个和内置的 property 类相同功能的类。</p><h3 id="在-python-语言层面实现-property-机制" tabindex="-1"><a class="header-anchor" href="#在-python-语言层面实现-property-机制" aria-hidden="true">#</a> 在 python 语言层面实现 property 机制</h3><p>具体的实现代码如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Property</span><span class="token punctuation">:</span>
    <span class="token string">&quot;Emulate PyProperty_Type() in Objects/descrobject.c&quot;</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fget<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fset<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fdel<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> doc<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>fget <span class="token operator">=</span> fget
        self<span class="token punctuation">.</span>fset <span class="token operator">=</span> fset
        self<span class="token punctuation">.</span>fdel <span class="token operator">=</span> fdel
        <span class="token keyword">if</span> doc <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">and</span> fget <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            doc <span class="token operator">=</span> fget<span class="token punctuation">.</span>__doc__
        self<span class="token punctuation">.</span>__doc__ <span class="token operator">=</span> doc
        self<span class="token punctuation">.</span>_name <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>

    <span class="token keyword">def</span> <span class="token function">__set_name__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> objtype<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> obj <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fget <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;property &#39;</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>_name<span class="token punctuation">}</span></span><span class="token string">&#39; has no getter&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>fget<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fset <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;property &#39;</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>_name<span class="token punctuation">}</span></span><span class="token string">&#39; has no setter&quot;</span></span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>fset<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__delete__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fdel <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;property &#39;</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>_name<span class="token punctuation">}</span></span><span class="token string">&#39; has no deleter&quot;</span></span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>fdel<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fget<span class="token punctuation">)</span><span class="token punctuation">:</span>
        prop <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>fget<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fset<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>
        prop<span class="token punctuation">.</span>_name <span class="token operator">=</span> self<span class="token punctuation">.</span>_name
        <span class="token keyword">return</span> prop

    <span class="token keyword">def</span> <span class="token function">setter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fset<span class="token punctuation">)</span><span class="token punctuation">:</span>
        prop <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>fget<span class="token punctuation">,</span> fset<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>
        prop<span class="token punctuation">.</span>_name <span class="token operator">=</span> self<span class="token punctuation">.</span>_name
        <span class="token keyword">return</span> prop

    <span class="token keyword">def</span> <span class="token function">deleter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fdel<span class="token punctuation">)</span><span class="token punctuation">:</span>
        prop <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>fget<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fset<span class="token punctuation">,</span> fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>
        prop<span class="token punctuation">.</span>_name <span class="token operator">=</span> self<span class="token punctuation">.</span>_name
        <span class="token keyword">return</span> prop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在对上面我们自己实现的类对象进行使用测试：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Rectangle</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_width <span class="token operator">=</span> width
        self<span class="token punctuation">.</span>_height <span class="token operator">=</span> height

    <span class="token decorator annotation punctuation">@Property</span>
    <span class="token keyword">def</span> <span class="token function">width</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_width

    <span class="token decorator annotation punctuation">@width<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">width</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;Width must be positive&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_width <span class="token operator">=</span> value

    <span class="token decorator annotation punctuation">@Property</span>
    <span class="token keyword">def</span> <span class="token function">height</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_height

    <span class="token decorator annotation punctuation">@height<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">height</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;Height must be positive&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_height <span class="token operator">=</span> value

    <span class="token decorator annotation punctuation">@Property</span>
    <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_width <span class="token operator">*</span> self<span class="token punctuation">.</span>_height


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    rect <span class="token operator">=</span> Rectangle<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>area<span class="token punctuation">)</span>

    rect<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">5</span>
    rect<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的程序输出结果如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token number">10</span>
<span class="token number">20</span>
<span class="token number">200</span>
<span class="token number">5</span>
<span class="token number">10</span>
<span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到正确的输出了结果。</p><p>现在我们来好好分析一下我们在上面使用到的自己实现的 <code>Property</code> 类是如何被调用的，在前面的内容当中我们已经讨论过了，只有类属性才可能是描述器，我们在使用 <code>@Property</code> 的时候是获取到对应的函数，更准确的说是获得对象的 get 函数，然后使用 <code>@Property</code> 的类当中的原来的函数就变成了 <code>Property</code> 对象了，后面就可以使用对象的 <code>setter</code> 方法了。</p><p>然后在使用 <code>rect.width</code> 或者 <code>rect.height</code> 方法的时候就活触发描述器的机制， rect 对象就会被传入到描述器的 <code>__get__</code>方法，然后在这个方法当中将传入的对象再传给之前得到的 <code>fget</code> 函数，就完美的实现了我们想要的效果。</p><h2 id="classmethod-和-staticmethod" tabindex="-1"><a class="header-anchor" href="#classmethod-和-staticmethod" aria-hidden="true">#</a> classmethod 和 staticmethod</h2><p>在 Python 中，staticmethod 和 classmethod 是两个常用的装饰器，它们分别用于定义静态方法和类方法。</p><h3 id="staticmethod" tabindex="-1"><a class="header-anchor" href="#staticmethod" aria-hidden="true">#</a> staticmethod</h3><p>staticmethod 是一个装饰器，它可以将一个函数定义为静态方法。静态方法与类实例无关，可以在不创建类实例的情况下直接调用，但它们仍然可以通过类名访问。</p><p>下面是一个简单的示例：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">my_static_method</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y

<span class="token keyword">print</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span>my_static_method<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们定义了一个 MyClass 类，并使用 @staticmethod 装饰器将 my_static_method 方法定义为静态方法。然后我们可以通过 MyClass.my_static_method(1, 2) 直接调用该方法，而不需要创建 MyClass 的实例。需要注意的是，静态方法没有对类或实例进行任何修改，因此它们通常用于一些独立的、无状态的函数，或者在类中定义的一些帮助函数。</p><p>那么 staticmethod 是如何在语法层面实现的呢？这又离不开描述器了，在上面的代码当中我们使用 <code>staticmethod</code> 装饰函数 <code>my_static_method</code> 然后在类 <code>MyClass</code> 当中会有一个类 staticmethod 的对象，且名字为 my_static_method 。我们需要注意到的是上面的过程用一行代码表示为 <code>my_static_method = staticmethod(my_static_method)</code>，传入的 my_static_method 就是 my_static_method 函数，那么这就很简单了，当使用 my_static_method 的属性时候，我们可以在描述器的函数 <code>__get__</code> 当中直接返回传入的函数即可。</p><p>我们自己实现的 StaticMethod 如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">StaticMethod</span><span class="token punctuation">:</span>
    <span class="token string">&quot;Emulate PyStaticMethod_Type() in Objects/funcobject.c&quot;</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>f <span class="token operator">=</span> f
        f <span class="token operator">=</span> functools<span class="token punctuation">.</span>update_wrapper<span class="token punctuation">(</span>self<span class="token punctuation">,</span> f<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> objtype<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>f

    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwds<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>f<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwds<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们使用上面自己实现的类：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@StaticMethod</span>
    <span class="token keyword">def</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;demo&quot;</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>demo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的程序会输出字符串 <code>&quot;demo&quot;</code> 。</p><h3 id="classmethod" tabindex="-1"><a class="header-anchor" href="#classmethod" aria-hidden="true">#</a> classmethod</h3><p>classmethod 是另一个装饰器，它可以将一个函数定义为类方法。类方法与静态方法类似，但它们接收的第一个参数是类对象而不是实例对象。类方法通常用于实现与类有关的操作，如工厂方法或构造函数。</p><p>下面是一个使用 classmethod 的示例：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    num_instances <span class="token operator">=</span> <span class="token number">0</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        MyClass<span class="token punctuation">.</span>num_instances <span class="token operator">+=</span> <span class="token number">1</span>
    
    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_num_instances</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>num_instances

obj1 <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj2 <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span>get_num_instances<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们定义了一个 MyClass 类，它包含一个类变量 num_instances 和一个构造函数。然后，我们使用 @classmethod 装饰器将 get_num_instances 方法定义为类方法，并将 cls 参数用于访问类变量 num_instances。</p><p>在创建 MyClass 的两个实例后，我们调用 MyClass.get_num_instances() 来获取当前创建的实例数。因为我们使用了类方法，所以可以直接通过类名调用该方法。</p><p>需要注意的是，类方法可以在类和实例之间共享，因为它们都可以访问类变量。另外，类方法可以被子类继承和重写，因为它们接收的第一个参数是类对象，而不是固定的类名。</p><p>在小节中，我们介绍了 Python 中的两种常用装饰器，即 staticmethod 和 classmethod。staticmethod 用于定义与类实例无关的静态方法，而 classmethod 用于定义与类相关的操作，如工厂方法或构造函数。两种装饰器都可以通过类名进行访问，但 classmethod 还可以被子类继承和重写，因为它们接收的第一个参数是类对象。</p><p>需要注意的是，staticmethod 和 classmethod 都可以被类或实例调用，但它们不同的是，classmethod 的第一个参数是类对象，而 staticmethod 没有这样的参数。因此，classmethod 可以访问类变量，而 staticmethod 不能访问类变量。</p><p>下面是一个更具体的比较：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    class_var <span class="token operator">=</span> <span class="token string">&#39;class_var&#39;</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">static_method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;This is a static method&#39;</span><span class="token punctuation">)</span>
        
    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">class_method</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;This is a class method&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;The class variable is: </span><span class="token interpolation"><span class="token punctuation">{</span>cls<span class="token punctuation">.</span>class_var<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span>

obj <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 静态方法可以被类或实例调用</span>
MyClass<span class="token punctuation">.</span>static_method<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>static_method<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 类方法可以被类或实例调用，并且可以访问类变量</span>
MyClass<span class="token punctuation">.</span>class_method<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>class_method<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们定义了一个 MyClass 类，并分别定义了静态方法和类方法。在调用静态方法时，我们可以使用类名或实例名进行调用，因为静态方法与类或实例无关。而在调用类方法时，我们必须使用类名或实例名进行调用，并且类方法可以访问类变量。总的来说，staticmethod 和 classmethod 是 Python 中两个非常有用的装饰器，它们可以帮助我们更好地组织和管理代码。需要根据实际情况来选择使用哪种装饰器，以便实现最佳的代码设计和可维护性。</p><p>同样的道理我们可以实现自己的 ClassMethod</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">ClassMethod</span><span class="token punctuation">:</span>
    <span class="token string">&quot;Emulate PyClassMethod_Type() in Objects/funcobject.c&quot;</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>f <span class="token operator">=</span> f
        functools<span class="token punctuation">.</span>update_wrapper<span class="token punctuation">(</span>self<span class="token punctuation">,</span> f<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> cls<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> cls <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            cls <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token keyword">return</span> MethodType<span class="token punctuation">(</span>self<span class="token punctuation">.</span>f<span class="token punctuation">,</span> cls<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们对上面的代码进行测试：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Myclass</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@ClassMethod</span>
    <span class="token keyword">def</span> <span class="token function">demo</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;demo&quot;</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> Myclass<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>demo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的代码可以正确的输出字符串<code>&quot;demo&quot;</code> 。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>在本篇文章当中主要给大家介绍了描述器的三个应用，仔细介绍了这三个类的使用方法，并且详细介绍了如何使用 python 实现同样的效果，这对于我们深入理解 python 面向对象编程非常有帮助，我们可以理解很多黑科技的内容，对于整个类的语法有更加深入的理解。</p><hr><p>本篇文章是深入理解 python 虚拟机系列文章之一，文章地址：https://github.com/Chang-LeHung/dive-into-cpython</p><p>更多精彩内容合集可访问项目：<a href="https://github.com/Chang-LeHung/CSCore" target="_blank" rel="noopener noreferrer">https://github.com/Chang-LeHung/CSCore<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>关注公众号：一无是处的研究僧，了解更多计算机（Java、Python、计算机系统基础、算法与数据结构）知识。</p><p><img src="/dive-into-cpython/assets/qrcode2-8057aa96.jpg" alt=""></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: changlehung@qq.com">changlehung</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/dive-into-cpython/obsy/01class.html" class="" aria-label="深入理解python虚拟机：黑科技的幕后英雄——描述器"><!--[--><!--]--> 深入理解python虚拟机：黑科技的幕后英雄——描述器 <!--[--><!--]--></a></span><span class="next"><a href="/dive-into-cpython/obsy/03decriptor.html" class="" aria-label="深入理解 python 虚拟机：描述器实现原理与源码分析"><!--[--><!--]--> 深入理解 python 虚拟机：描述器实现原理与源码分析 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/dive-into-cpython/assets/app-6b5e6c63.js" defer></script>
  </body>
</html>
